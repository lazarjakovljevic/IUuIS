<UserControl x:Class="NetworkService.Views.MeasurementGraphView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NetworkService.Views"
             mc:Ignorable="d" 
             d:DesignHeight="750" d:DesignWidth="600">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">

            <!-- Header -->
            <TextBlock Text="📈 Measurement History Graph" 
                      FontSize="22" 
                      FontWeight="Bold" 
                      Foreground="#2E3440" 
                      Margin="0,0,0,20"/>

            <!-- Entity Selection -->
            <Border Background="White" 
                    BorderBrush="#D8DEE9" 
                    BorderThickness="1" 
                    CornerRadius="8" 
                    Padding="15"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Select Entity:" 
                              FontSize="14" 
                              FontWeight="SemiBold" 
                              Margin="0,0,0,10"/>
                    <Grid Width="200" HorizontalAlignment="Left">
                        <ComboBox Name="EntityComboBox"
                                  ItemsSource="{Binding AvailableEntities}"
                                  SelectedItem="{Binding SelectedEntity}"
                                  DisplayMemberPath="Name"
                                  Height="30">
                            <ComboBox.Style>
                                <Style TargetType="ComboBox">
                                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                                    <Setter Property="Padding" Value="5,0,5,0"/>
                                </Style>
                            </ComboBox.Style>
                        </ComboBox>

                        <TextBlock Text="Select an entity..." 
                                   Foreground="Gray" 
                                   VerticalAlignment="Center" 
                                   HorizontalAlignment="Left"
                                   IsHitTestVisible="False"
                                   Margin="8,0,0,0">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedEntity}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Graph Area -->
            <Border Background="White" 
                    BorderBrush="#D8DEE9" 
                    BorderThickness="1" 
                    CornerRadius="8" 
                    Padding="20">
                <StackPanel>
                    <TextBlock Text="Last 5 Measurements" 
                              FontSize="16" 
                              FontWeight="SemiBold" 
                              Margin="0,0,0,15"/>

                    <!-- Canvas for drawing chart -->
                    <Canvas Name="ChartCanvas" 
                           Width="475" 
                           Height="400" 
                           Background="White"
                           Margin="25,10,25,10" 
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</UserControl>
